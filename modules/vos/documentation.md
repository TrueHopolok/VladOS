<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# vos

```go
import "github.com/TrueHopolok/VladOS/modules/vos"
```

### VladOS Security \\\- VOS

VladOS Security \(shortly VOS\) is a package used for all security related stuff inside VladOS the project.

Examples: JWT, encryption keys.

### Encryption Keys

TODO: add info

### Json Web Token \\\- JWT

TODO: add info

## Index

- [Constants](<#constants>)
- [func GetBothEncryptionKeys\(t \*testing.T\) \[2\]\[\]byte](<#GetBothEncryptionKeys>)
- [func ManualSwitch\(t \*testing.T\)](<#ManualSwitch>)
- [func SignJWT\(header, body string, encryptionKey \[\]byte\) \(string, error\)](<#SignJWT>)
- [type KeyChain](<#KeyChain>)
- [type Session](<#Session>)
  - [func \(ses Session\) NewJWT\(\) \(string, error\)](<#Session.NewJWT>)
  - [func \(ses \*Session\) ValidateJWT\(token string\) \(bool, error\)](<#Session.ValidateJWT>)


## Constants

<a name="EncryptionKeysSwitchingTime"></a>

```go
const (
    // Time of a keys switch in minutes.
    EncryptionKeysSwitchingTime time.Duration = 60

    // Size of a signle key in bytes.
    EncryptionKeysSize int = 64
)
```

<a name="JWTheaderJSON"></a>JWT header consisting of type itself and algorithm used. Currently [crypto/hmac](<https://pkg.go.dev/crypto/hmac/>) combined with [crypto.SHA512](<https://pkg.go.dev/crypto/#SHA512>) are being used.

```go
const JWTheaderJSON string = `
{
  "alg": "HS512",
  "typ": "JWT"
}`
```

<a name="GetBothEncryptionKeys"></a>
## func GetBothEncryptionKeys

```go
func GetBothEncryptionKeys(t *testing.T) [2][]byte
```

Returns keys field of a encryption key chain to test for validation.

\!WARNING\! \- must be used only for testing purposes.

<a name="ManualSwitch"></a>
## func ManualSwitch

```go
func ManualSwitch(t *testing.T)
```

Calls \[switchEncryptionKeys\] outside the time cycle, to test if switch was valid.

\!WARNING\! \- must be used only for testing purposes.

<a name="SignJWT"></a>
## func SignJWT

```go
func SignJWT(header, body string, encryptionKey []byte) (string, error)
```

Returns a signature/secret part of a JWT.

Should never return an error, since [hash.Write](<https://pkg.go.dev/hash/#Write>) never returns an error.

<a name="KeyChain"></a>
## type KeyChain

Contains 2 keys and a mutex, making it multiple goroutines save.

Keys pair consist of:

- current key, which is used for an encrypting and decrypting,
- previous key, which should be used only for decrypting.

Chain itself and all methods should be used only inside this package.

```go
type KeyChain struct {
    // contains filtered or unexported fields
}
```

<a name="Session"></a>
## type Session

Contains all necessary information for other packages to use. All fields must support [encoding/json](<https://pkg.go.dev/encoding/json/>) marshalling/unmarshalling and be tested on that.

```go
type Session struct {
    Username string    `json:"Username"`
    Expire   time.Time `json:"Expire"`
}
```

<a name="Session.NewJWT"></a>
### func \(Session\) NewJWT

```go
func (ses Session) NewJWT() (string, error)
```

Encodes session into a new JWT.

Should never return an error, since:

- [hash.Write](<https://pkg.go.dev/hash/#Write>) never returns an error;
- [encoding/json.Marshal](<https://pkg.go.dev/encoding/json/#Marshal>) for session should not return an error.

<a name="Session.ValidateJWT"></a>
### func \(\*Session\) ValidateJWT

```go
func (ses *Session) ValidateJWT(token string) (bool, error)
```

Returns if given JWT is valid or not.

Should never return an error, since:

- [hash.Write](<https://pkg.go.dev/hash/#Write>) never returns an error;
- [encoding/json.Unmarshal](<https://pkg.go.dev/encoding/json/#Unmarshal>) works with valid marshalled session thus should not return an error.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
